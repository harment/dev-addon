<!-- admin:xbt_admin_user_stats_edit -->
<xf:title>{{ phrase('xbt_edit_user_stats') }}: {$user.username}</xf:title>

<xf:form action="{{ link('tracker/users/edit', {'user_id': $user.user_id}) }}" class="block" ajax="true">
    <div class="block-container">
        <div class="block-header">
            <h1 class="block-header-title">{{ phrase('xbt_edit_user_stats') }}</h1>
            <div class="block-header-controls">
                <a href="{{ link('members/edit', $user) }}" class="button">
                    {{ phrase('edit_user_account') }}
                </a>
            </div>
        </div>
        
        <div class="block-body">
            <xf:formrow label="{{ phrase('username') }}:">
                <xf:username user="$user" />
            </xf:formrow>
            
            <xf:formrow label="{{ phrase('xbt_current') }} {{ phrase('xbt_uploaded') }}:">
                <div class="inputGroup">
                    <code>{$userStats.uploaded|file_size}</code>
                </div>
            </xf:formrow>
            
            <xf:formrow label="{{ phrase('xbt_adjust') }} {{ phrase('xbt_uploaded') }}:">
                <div class="inputGroup inputGroup--numbers">
                    <xf:numberbox name="upload_adjust" step="1" min="0" value="0" />
                    <span class="inputGroup-text">GB</span>
                </div>
                <div class="formRow-explain">{{ phrase('enter_gb_to_adjust') }}</div>
            </xf:formrow>
            
            <xf:formrow label="{{ phrase('xbt_current') }} {{ phrase('xbt_downloaded') }}:">
                <div class="inputGroup">
                    <code>{$userStats.downloaded|file_size}</code>
                </div>
            </xf:formrow>
            
            <xf:formrow label="{{ phrase('xbt_adjust') }} {{ phrase('xbt_downloaded') }}:">
                <div class="inputGroup inputGroup--numbers">
                    <xf:numberbox name="download_adjust" step="1" min="0" value="0" />
                    <span class="inputGroup-text">GB</span>
                </div>
                <div class="formRow-explain">{{ phrase('enter_gb_to_adjust') }}</div>
            </xf:formrow>
            
            <xf:formrow label="{{ phrase('xbt_current') }} {{ phrase('xbt_ratio') }}:">
                <div class="inputGroup">
                    <xf:if is="$userStats.downloaded > 0">
                        <code>{$userStats.ratio|number(2)}</code>
                    <xf:else />
                        <code>∞</code>
                    </xf:if>
                </div>
            </xf:formrow>
            
            <xf:formrow label="{{ phrase('xbt_current') }} {{ phrase('xbt_bonus_points') }}:">
                <div class="inputGroup">
                    <code>{$userStats.bonus_points|number}</code>
                </div>
            </xf:formrow>
            
            <xf:formrow label="{{ phrase('xbt_adjust') }} {{ phrase('xbt_bonus_points') }}:">
                <div class="inputGroup inputGroup--numbers">
                    <xf:numberbox name="bonus_points_adjust" step="100" value="0" />
                </div>
                <div class="formRow-explain">{{ phrase('enter_points_to_adjust') }}</div>
            </xf:formrow>
            
            <xf:formrow label="{{ phrase('xbt_current') }} {{ phrase('xbt_warnings') }}:">
                <div class="inputGroup">
                    <code>{$userStats.warnings|number}</code>
                </div>
            </xf:formrow>
            
            <xf:formrow label="{{ phrase('xbt_adjust') }} {{ phrase('xbt_warnings') }}:">
                <div class="inputGroup inputGroup--numbers">
                    <xf:numberbox name="warnings_adjust" step="1" value="0" min="-{$userStats.warnings}" />
                </div>
                <div class="formRow-explain">{{ phrase('enter_warnings_to_adjust') }}</div>
            </xf:formrow>
            
            <hr class="formRowSep" />
            
            <xf:formrow label="{{ phrase('adjustment_reason') }}:" required="required">
                <xf:textbox name="reason" required="required" />
                <div class="formRow-explain">{{ phrase('required_for_audit_log') }}</div>
            </xf:formrow>
        </div>
        
        <xf:submitrow icon="save" submit="{{ phrase('save_changes') }}" />
    </div>
    
    <xf:redirect url="{{ link('tracker/users') }}" />
</xf:form>